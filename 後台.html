<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8"> <!-- è¨­å®šç¶²é å­—å…ƒç·¨ç¢¼ç‚º UTF-8 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- éŸ¿æ‡‰å¼è¨­è¨ˆè¨­å®š -->
  <title>å¾Œå°ç®¡ç†</title> <!-- è¨­å®šç¶²é æ¨™é¡Œ -->
  <style>
    body {
      margin: 0; /* ç§»é™¤é è¨­å¤–è· */
      padding: 0; /* ç§»é™¤é è¨­å…§è· */
      font-family: 'Segoe UI', sans-serif; /* è¨­å®šæ•´é«”å­—å‹ */
      background-color: #f0f8ff; /* èƒŒæ™¯è‰²ç‚ºæ·¡è—è‰² */
    }

    .container {
      display: flex; /* ä½¿ç”¨ Flex æ’ç‰ˆ */
      flex-direction: column; /* å‚ç›´æ’åˆ— */
      align-items: center; /* ç½®ä¸­å°é½Š */
      justify-content: center; /* å‚ç›´ç½®ä¸­ */
      min-height: 100vh; /* æœ€å°é«˜åº¦ç‚ºæ•´å€‹ç•«é¢é«˜åº¦ */
      gap: 20px; /* å€å¡Šé–“è· */
    }

    .card {
      background-color: #ffffff; /* ç™½è‰²å¡ç‰‡èƒŒæ™¯ */
      border-radius: 12px; /* åœ“è§’é‚Šæ¡† */
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* é™°å½±æ•ˆæœ */
      padding: 20px; /* å…§è· */
      width: 33%; /* å¯¬åº¦ç‚ºç•«é¢ä¸‰åˆ†ä¹‹ä¸€ */
      min-width: 300px; /* æœ€å°å¯¬åº¦é™åˆ¶ */
      box-sizing: border-box; /* å…§è·ä¸è¶…å‡ºå¯¬åº¦ */
    }

    h2 {
      color: #333; /* æ¨™é¡Œæ–‡å­—é¡è‰² */
    }

    label {
      display: block; /* æ¨™ç±¤ç¨ç«‹æˆä¸€è¡Œ */
      margin: 10px 0 5px; /* ä¸Šä¸‹é‚Šè· */
      font-weight: bold; /* ç²—é«”å­— */
    }

    input[type="number"],
    input[type="date"] {
      width: 100%; /* æ»¿ç‰ˆå¯¬åº¦ */
      padding: 8px; /* å…§è· */
      border-radius: 6px; /* åœ“è§’é‚Šæ¡† */
      border: 1px solid #ccc; /* æ·ºç°è‰²é‚Šæ¡† */
    }

    button {
      margin-top: 10px; /* èˆ‡ä¸Šæ–¹é–“è· */
      padding: 10px 15px; /* å…§è· */
      border: none; /* ç§»é™¤é‚Šæ¡† */
      border-radius: 8px; /* åœ“è§’æŒ‰éˆ• */
      background-color: #4CAF50; /* ç¶ è‰²èƒŒæ™¯ */
      color: white; /* ç™½è‰²æ–‡å­— */
      cursor: pointer; /* æ»‘é¼ æ¸¸æ¨™ç‚ºæŒ‡æ¨™ */
      transition: background-color 0.3s; /* æ»‘å‹•è®Šè‰²æ•ˆæœ */
    }

    button:hover {
      background-color: #45a049; /* æ»‘éæ™‚è®Šè‰² */
    }

    .button-group {
      display: flex; /* æ°´å¹³æ’åˆ— */
      justify-content: space-between; /* å·¦å³é–“è· */
      gap: 20px; /* æŒ‰éˆ•é–“è· */
      margin-top: 10px; /* èˆ‡ä¸Šæ–¹é–“è· */
    }

    .guest-log {
      margin-top: 10px; /* èˆ‡ä¸Šæ–¹å€å¡Šé–“è· */
      background-color: #f9f9f9; /* æ·ºç°åº•è‰² */
      padding: 10px; /* å…§è· */
      border-radius: 8px; /* åœ“è§’ */
      font-size: 14px; /* å­—é«”å¤§å° */
    }
  </style>
</head>
<body>
  <div class="container"> <!-- ä¸»è¦å®¹å™¨ï¼Œå…§å®¹å€åŸŸç½®ä¸­ -->
    
    <!-- ğŸ”µ å€å¡Š 1ï¼šè¼¸å…¥æ¯æ—¥ä¾†å®¢æ•¸ -->
    <div class="card">
      <h2>æ¯æ—¥ä¾†å®¢æ•¸ç´€éŒ„</h2> <!-- å€å¡Šæ¨™é¡Œ -->
      <label for="visit-date">é¸æ“‡æ—¥æœŸ</label> <!-- æ—¥æœŸæ¬„æ¨™ç±¤ -->
      <input type="date" id="visit-date"> <!-- æ—¥æœŸè¼¸å…¥æ¬„ä½ -->

      <label for="visit-count">ä¾†å®¢äººæ•¸</label> <!-- ä¾†å®¢æ•¸æ¨™ç±¤ -->
      <input type="number" id="visit-count" min="0"> <!-- æ•¸å­—è¼¸å…¥æ¬„ä½ -->

      <button onclick="saveGuestCount()">å„²å­˜ä¾†å®¢æ•¸</button> <!-- å„²å­˜æŒ‰éˆ• -->

      <div class="guest-log" id="guest-log">å°šç„¡è¨˜éŒ„</div> <!-- é¡¯ç¤ºä¾†å®¢æ•¸ç´€éŒ„ -->
    </div>

    <!-- ğŸŸ¢ å€å¡Š 2ï¼šé¡¯ç¤ºå„å€é–“ä¸­çæ¬¡æ•¸èˆ‡é‡è¨­ -->
    <div class="card">
      <h2>ä¸­çæ¬¡æ•¸çµ±è¨ˆ</h2> <!-- æ¨™é¡Œ -->

      <div id="win-stats">è¼‰å…¥ä¸­...</div> <!-- é¡¯ç¤ºä¸­çæ¬¡æ•¸çš„å€åŸŸ -->

      <button onclick="confirmResetWinners()">é‡è¨­ä¸­çæ¬¡æ•¸</button> <!-- é‡è¨­æŒ‰éˆ• -->
    </div>

    <!-- ğŸ”´ å€å¡Š 3ï¼šé‡è¨­è½‰å‹•æ¬¡æ•¸ -->
    <div class="card">
      <h2>è½‰å‹•æ¬¡æ•¸è¨­å®š</h2> <!-- å€å¡Šæ¨™é¡Œ -->
      <button onclick="confirmResetSpins()">é‡è¨­è½‰å‹•æ¬¡æ•¸</button> <!-- é‡è¨­æŒ‰éˆ• -->
    </div>
  </div>

  <script>
    const PASSWORD = "nggchr"; // âœ… è¨­å®šå¯†ç¢¼

    // â¬› åˆå§‹åŒ–ï¼šè¼‰å…¥ä¾†å®¢æ•¸èˆ‡ä¸­çæ¬¡æ•¸
    window.onload = function () {
      loadGuestLog(); // è¼‰å…¥æ¯æ—¥ä¾†å®¢æ•¸ç´€éŒ„
      loadWinStats(); // è¼‰å…¥ä¸­çæ¬¡æ•¸
    }

    // ğŸŸ¨ å„²å­˜ä¾†å®¢æ•¸åŠŸèƒ½
    function saveGuestCount() {
      const date = document.getElementById("visit-date").value; // å–å¾—æ—¥æœŸ
      const count = document.getElementById("visit-count").value; // å–å¾—æ•¸é‡
      if (!date || count === "") {
        alert("è«‹è¼¸å…¥æ—¥æœŸèˆ‡äººæ•¸"); return; // é©—è­‰è¼¸å…¥
      }

      let logs = JSON.parse(localStorage.getItem("guestLog") || "{}"); // è®€å–è¨˜éŒ„
      if (logs[date]) {
        const pw = prompt("æ­¤æ—¥æœŸå·²æœ‰ç´€éŒ„ï¼Œè«‹è¼¸å…¥å¯†ç¢¼ä»¥è¦†è“‹ï¼š"); // é¡¯ç¤ºæç¤ºçª—
        if (pw !== PASSWORD) {
          alert("å¯†ç¢¼éŒ¯èª¤ï¼Œå–æ¶ˆå„²å­˜"); return; // å¯†ç¢¼éŒ¯èª¤
        }
      }

      logs[date] = count; // å„²å­˜äººæ•¸
      localStorage.setItem("guestLog", JSON.stringify(logs)); // æ›´æ–°æœ¬åœ°å„²å­˜
      loadGuestLog(); // æ›´æ–°ç•«é¢
      alert("ä¾†å®¢æ•¸å·²å„²å­˜ï¼");
    }

    // ğŸŸ© è¼‰å…¥æ¯æ—¥ä¾†å®¢æ•¸ç´€éŒ„
    function loadGuestLog() {
      const logs = JSON.parse(localStorage.getItem("guestLog") || "{}"); // è®€å–è¨˜éŒ„
      const logDiv = document.getElementById("guest-log"); // é¡¯ç¤ºå€å¡Š
      if (Object.keys(logs).length === 0) {
        logDiv.textContent = "å°šç„¡è¨˜éŒ„"; return;
      }
      logDiv.innerHTML = ""; // æ¸…ç©ºå…§å®¹
      for (let date in logs) {
        const p = document.createElement("p"); // å»ºç«‹æ®µè½
        p.textContent = `${date}ï¼š${logs[date]}äºº`; // é¡¯ç¤ºæ ¼å¼
        logDiv.appendChild(p);
      }
    }

    // ğŸŸ¥ é¡¯ç¤ºä¸­çæ¬¡æ•¸
    function loadWinStats() {
      const stats = JSON.parse(localStorage.getItem("winStats") || "[]"); // è®€å–ä¸­ççµ±è¨ˆ
      const div = document.getElementById("win-stats"); // é¡¯ç¤ºå€å¡Š
      if (stats.length === 0) {
        div.innerHTML = "å°šç„¡ä¸­çç´€éŒ„";
        return;
      }
      div.innerHTML = ""; // æ¸…ç©ºå…§å®¹
      stats.forEach((count, index) => {
        const p = document.createElement("p"); // å»ºç«‹æ®µè½
        p.textContent = `å€é–“ ${index + 1}ï¼š${count} æ¬¡`; // é¡¯ç¤ºå…§å®¹
        div.appendChild(p);
      });
    }

    // ğŸ” é‡è¨­ä¸­çæ¬¡æ•¸ç¢ºèª
    function confirmResetWinners() {
      const pw = prompt("è«‹è¼¸å…¥å¯†ç¢¼ä»¥é‡è¨­ä¸­çæ¬¡æ•¸ï¼š"); // æç¤ºè¼¸å…¥å¯†ç¢¼
      if (pw === PASSWORD) {
        localStorage.removeItem("winStats"); // æ¸…é™¤ç´€éŒ„
        alert("ä¸­çæ¬¡æ•¸å·²é‡è¨­");
        loadWinStats(); // æ›´æ–°ç•«é¢
      } else {
        alert("å¯†ç¢¼éŒ¯èª¤ï¼Œå–æ¶ˆæ“ä½œ");
      }
    }

    // ğŸ” é‡è¨­è½‰å‹•æ¬¡æ•¸ç¢ºèª
    function confirmResetSpins() {
      const pw = prompt("è«‹è¼¸å…¥å¯†ç¢¼ä»¥é‡è¨­è½‰å‹•æ¬¡æ•¸ï¼š"); // æç¤ºè¼¸å…¥å¯†ç¢¼
      if (pw === PASSWORD) {
        localStorage.removeItem("spinCount"); // æ¸…é™¤æ¬¡æ•¸
        alert("è½‰å‹•æ¬¡æ•¸å·²é‡è¨­");
      } else {
        alert("å¯†ç¢¼éŒ¯èª¤ï¼Œå–æ¶ˆæ“ä½œ");
      }
    }
  </script>
</body>
</html>
